<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم ولي الأمر</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <h2>مرحبًا بك، ولي الأمر</h2>
        <h3>الفعاليات المتاحة:</h3>
        <ul id="eventList"></ul>
        <button onclick="logout()">تسجيل الخروج</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let events = JSON.parse(localStorage.getItem("events")) || [];
            let eventList = document.getElementById("eventList");

            if (events.length > 0) {
                events.forEach(event => {
                    let li = document.createElement("li");
                    li.innerHTML = `<strong>${event.title}</strong>: ${event.description}
                    <button onclick="registerChild('${event.title}')">تسجيل الطفل</button>`;
                    eventList.appendChild(li);
                });
            } else {
                eventList.innerHTML = "<p>لا توجد فعاليات متاحة حاليًا.</p>";
            }
        });

        function registerChild(eventTitle) {
            let parentEmail = localStorage.getItem("loggedInParent");
            if (!parentEmail) return alert("يجب تسجيل الدخول أولًا!");

            let childName = prompt("أدخل اسم الطفل:");
            let childAge = prompt("أدخل عمر الطفل:");

            if (childName && childAge) {
                let registrations = JSON.parse(localStorage.getItem("registrations")) || [];
                registrations.push({ parentEmail, eventTitle, childName, childAge });
                localStorage.setItem("registrations", JSON.stringify(registrations));
                alert("تم تسجيل الطفل بنجاح!");
            }
        }

        function logout() {
            localStorage.removeItem("loggedInParent");
            window.location.href = "login_parent.html";
        }
    </script>
</body>
</html>
